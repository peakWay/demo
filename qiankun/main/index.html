<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="mainapp">
        <div class="mainapp-main">
            <!-- 菜单&header -->
            <div class="mainapp-header">
                <div class="mainapp-menu">
                    <div onclick="handleClick()">
                        <img src="https://oss.pocketuniversity.cn/media/2019-09-19/5d82dea62ca69.JPG" style="width: 50px; height: 50px" />
                    </div>

                    <div onclick="handleClick(event)">vue2</div>
                    <div onclick="handleClick(event)">vue3</div>
                    <div onclick="handleClick(event)">react</div>
                </div>
            </div>
            <!-- 子应用  -->
            <main id="subapp-container"></main>
            <div id="app"></div>
        </div>
    </div>

    <script>
        function handleClick(e) {
            console.log(e.target.textContent)
            if (e) {
                const menuMap = {
                    vue2: 1,
                    vue3: 2,
                    react: 3,
                };
                const index = menuMap[e.target.textContent];
                setActiveMenu(index);
                push("/" + e.target.textContent);
            } else {
                push("/vue2");
                setActiveMenu(1)
            }
        }
        function setActiveMenu(index) {
            let menuNodeList = document.querySelectorAll(".mainapp-menu div");
            for (let i = 0; i < menuNodeList.length; i++) {
                menuNodeList[i].className = "";
            }
            menuNodeList[index].className = "active";
        }
        setActiveMenu(1)
        function push(subapp) {
            history.pushState(null, subapp, subapp);
        }
    </script>
</body>

</html>